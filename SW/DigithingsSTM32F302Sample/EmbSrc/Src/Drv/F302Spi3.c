#include "..\Target\Target.h"
#include "..\STM32F302_Gen\STM32F302_SPI3_Def.h"

void Spi3Init(void) {
	volatile sSTM32F302_SPI3 * pSTM32F302_SPI3 = (sSTM32F302_SPI3 *)F302_SPI3_ADR;
	volatile uSTM32F302_SPI3_CR1 STM32F302_SPI3_CR1;
	volatile uSTM32F302_SPI3_CR2 STM32F302_SPI3_CR2;


	STM32F302_SPI3_CR1.All = STM32F302_SPI3_CR1_RESET_VALUE;
	STM32F302_SPI3_CR1.Bit.CPOL = 0;
	STM32F302_SPI3_CR1.Bit.CPHA = 1;
	STM32F302_SPI3_CR1.Bit.MSTR = 1;
	STM32F302_SPI3_CR1.Bit.BR = 0x6;
	pSTM32F302_SPI3->STM32F302_SPI3_CR1.All = STM32F302_SPI3_CR1.All;

	STM32F302_SPI3_CR2.All = STM32F302_SPI3_CR2_RESET_VALUE;
	STM32F302_SPI3_CR2.Bit.SSOE = 1;
	STM32F302_SPI3_CR2.Bit.DS = (8-1);
	STM32F302_SPI3_CR2.Bit.FRXTH = 1;
	STM32F302_SPI3_CR2.Bit.RXNEIE = 1;
	pSTM32F302_SPI3->STM32F302_SPI3_CR2.All = STM32F302_SPI3_CR2.All;
}
