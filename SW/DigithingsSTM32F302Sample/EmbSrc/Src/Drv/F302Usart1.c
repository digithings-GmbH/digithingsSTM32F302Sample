#include "../Target/Target.h"

#include "../STM32F302_Gen/STM32F302_USART1_EXTI25_Def.h"
#include "../Drv/F302Rcc.h"

#define USART2_BAUD_RATE 19200


void Usart1Init(void) {

	volatile sSTM32F302_USART1_EXTI25* pSTM32F302_USART1_EXTI25 = (sSTM32F302_USART1_EXTI25*)F302_USART1_ADR;
	volatile uSTM32F302_USART1_EXTI25_CR1 STM32F302_USART1_EXTI25_CR1;
	volatile uSTM32F302_USART1_EXTI25_CR2 STM32F302_USART1_EXTI25_CR2;
	volatile uSTM32F302_USART1_EXTI25_BRR STM32F302_USART1_EXTI25_BRR;

	STM32F302_USART1_EXTI25_BRR.All = STM32F302_USART1_EXTI25_BRR_RESET_VALUE;
	STM32F302_USART1_EXTI25_BRR.Bit.DIV_Fraction = 0;
	STM32F302_USART1_EXTI25_BRR.Bit.DIV_Mantissa = 156;
	pSTM32F302_USART1_EXTI25->STM32F302_USART1_EXTI25_BRR.All = STM32F302_USART1_EXTI25_BRR.All;

	STM32F302_USART1_EXTI25_CR2.All = STM32F302_USART1_EXTI25_CR2_RESET_VALUE;
	STM32F302_USART1_EXTI25_CR2.Bit.ADD0 = 0xA;
	STM32F302_USART1_EXTI25_CR2.Bit.ADD4 = 0x0;
	STM32F302_USART1_EXTI25_CR2.Bit.ADDM7 = 1;
	pSTM32F302_USART1_EXTI25->STM32F302_USART1_EXTI25_CR2.All = STM32F302_USART1_EXTI25_CR2.All;

	STM32F302_USART1_EXTI25_CR1.All = STM32F302_USART1_EXTI25_CR1_RESET_VALUE;
	STM32F302_USART1_EXTI25_CR1.Bit.UE = 1;
	STM32F302_USART1_EXTI25_CR1.Bit.RE = 1;
	STM32F302_USART1_EXTI25_CR1.Bit.CMIE = 0;
	STM32F302_USART1_EXTI25_CR1.Bit.RXNEIE = 0;
	pSTM32F302_USART1_EXTI25->STM32F302_USART1_EXTI25_CR1.All = STM32F302_USART1_EXTI25_CR1.All;
}
